### 数据获取的方式

1. 政府/机构提供的公开数据
2. 虫部落数据搜索
3. 第三方数据平台购买
4. 爬虫爬取数据
5. 企业生产的用户数据

（贵阳大数据交易：应用了区块链技术、数据确权技术、数据撮合技术等国内最领先的技术。）

### 爬虫

爬虫：抓取网页数据的程序

网页三大特征：
1. 每个网页都有自己的URL（统一资源定位符）来进行定位
2. 网页都使用HTML（超文本标记语言）来描述页面信息
3. 网页都使用HTTP/HTTPS（超文本传输协议）来传输HTML数据

设计思路：
1. 首先确定需要爬取的网页URL地址
2. 通过HTTP/HTTPS协议来获取对应的HTML页面
3. 提取HTML页面里有用的数据
    * 如果是需要的数据，就保存起来
    * 如果是页面里的其它URL，那就继续执行第二步

为什么选Python

1. 可以做爬虫的语言有很多，如 PHP,Java,C/C++,Python等
2. JAVA是Python爬虫最大的对手，但Java语言笨重，代码量大
3. C++运行效率和性能仅次于汇编，但学习成本很高
4. PHP是最好的语言，但对多线程、异步支持不够
5. Python语法优美、代码简洁，开发效率高、支持模块多，胶水语言

Learn Path

1. Python语法
2.如何抓取HTML页面
    * HTTP请求的处理，urllib、urllib2、request
    * 处理后的请求看i一模拟浏览器发送请求，获取服务器响应的文件

3. 解析服务器响应的内容
    * re、xpath、BeautifulSoup4(bs4)、jsonpath、pyquery等
    * 使用某种描述性一样来给我们需要提取的数据定义一个匹配规则，符合这个规则的数据就会被匹配。

4. 如何采集动态HTML、验证码的处理
    * 通用的动态页面采集：Selenium + PhantomJS（无界面）：模拟真实浏览器加载
    * Tesseract：机器学习库，机器图像识别系统（打码平台），可以处理简单的验证码，复杂的验证码可以通过手动输入。

5. Scrapy框架：（Scrapy,Pyspider）
    * 高定制性高性能（异步网路框架twisted），所以数据下载速度非常快，提供了数据存储、数据下载、提取规则等组件。

6. 分布式策略：
    * scrapy-redis，再Scrapy的基础上添加了一套以Redis数据库（基于内存存储的数据库）为核心的一套组件让Scrapy框架支持分布式的功能，主要再Redis里做请求指纹去重、请求分配、数据临时存储

7. 爬虫  反爬床  反反爬床 之间的斗争：
    * User-Agent、代理、验证码、动态数据加载、加密数据。
    * 数据价值是否值得去费劲做反爬虫。
    * 机器成本 + 人力成本 > 数据价值，就不反了，一般做到封IP就结束了
    * 爬虫和反爬虫之间的斗争，最后都是爬虫胜利

### 通用爬虫  聚焦爬虫

1. 通用爬虫：搜索引擎用的爬虫系统
    * 目标：尽可能把互联网上所有的网页下载下来，放到本地服务器离形成备份，再对这些网页做相关处理（提取关键字、去掉广告），左后提供一个用

2. 抓取流程：
    a. 首先选取一部分已有的URL，把这些URL放到待爬取队列
    b. 从队列里取出这些URL,然后解析得到主机IP，到服务器里下载HTML,把爬过的URL放入已爬取队列。
    c. 分析这些网页内容，找出网页里其它的URL连接，继续执行第二步，直到结束

3. 搜索引擎如何获取一个新网站的URL：
    * 主动向搜索引擎提交网址
    * 再其它网站里设置网站的外链
    * 搜索引擎会和DNS服务商进行合作，可以快速收录新的网站

4. 通用爬虫并不是王五皆可爬，也需要遵守规则：
    * Robots协议：协议会指明通用爬虫可以爬取网页的权限。
    * Robots.txt只是一个建议，并不是所有爬虫都遵守，一般只有大型搜索网站

5. 通用爬虫工作流程：爬取网页 = 存储数据 - 内容处理 - 提供检索/排名服务

6. 搜索引擎排名：
    * PageRank值：根据网站的流量（点击量/浏览量/人气）统计，流量越高，排名靠前
    * 竞价排名：谁钱多，谁排名就高

7. 通用爬虫的缺点：
    * 只能提供和文本相关的内容（HTML、WORD、pdf）等，但是不能提供多媒体文件（音乐，图片，视频）
    * 提供结果千篇一律，不能针对不同背景领域的人提供不同的搜索结果
    * 不能理解人类语义上的检索


聚焦爬虫：爬虫程序员写的针对某种内容爬虫

  * 面向主题爬虫，面向需求爬虫：会针对某种特定的内容去爬取信息，而且会保证信息和需求相关

### 模块
Python自带的模块：
/usr/lib/python2.7/urllib2.py

Python的第三方模块：
/usr/local/lib/python2.7/site-packages

urllib2 默认的 User-Agent：Python-urllib/2.7

data:默认Get，还有Post

User-Agent: 是爬虫和反爬虫斗争的第一步，养成好习惯，发送请求带User-Agent

response 是服务器响应的类文件，除了支持文件操作的方法外，还支持以下方法
```python
#返回HTTP的响应码，成功返回200，4服务器页面出错，5服务器问题
response.getcode()

#返回实际数据的实际URL,防止重定向问题
response.geturl()

#返回服务器响应的HTTP报头
response.info()
```

### 浏览器

Mosaic 世界上第一个浏览器：美国国家计算机应用中心

Netscape 网景：Netscape（支持框架），开始流行起来
Microsoft 微软：Internet Explorer（也支持框架）
IE给自己披着个Mozilla的外皮

第一次浏览器大战：网景公司失败..消失

User-Agent 决定用户的浏览器，获取响应的HTML页面效果

Mozilla 基金组织：Firefox 火狐 - （Gecko内核）
Opera 没有模仿

内核

Opera: Presto

Mozilla: Firefox (Gecko)

Apple: Webkit (like KHTML)

Google: Chrome (like webkit)

IE: Trident

Linux: KHTML (like Gecko)

其它浏览器都是模仿IE/Chrome
